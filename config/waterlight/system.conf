# Waterlight OS System Configuration
# /etc/waterlight/system.conf
#
# This is the master configuration file for a running Waterlight system.
# It is read after the Alpha Frame has completed hydrogen phase.

[system]
# System identity
hostname = waterlight
domain = local
version = 0.1.0
codename = Genesis

# Current chirality (sigma axis)
# 0 = matter (production)
# 1 = antimatter (development)
sigma = 0

# Logging level: quiet, normal, verbose, debug
log_level = normal

# Log destination: console, file, both
log_target = both

[vertices]
# Enable/disable vertices at system level
# Kernel vertices (V000, V010) are always active
# Antimatter vertices respect sigma setting

V000 = enabled    # Neutrino: always on
V001 = auto       # Antineutrino: follows sigma
V010 = enabled    # Neutron: always on
V011 = auto       # Antineutron: follows sigma
V100 = enabled    # Photon: always on in running system
V101 = auto       # Antiphoton: follows sigma
V110 = enabled    # Electron: always on in running system
V111 = auto       # Positron: follows sigma

# "auto" means: active when sigma=1, inactive when sigma=0
# "enabled" means: always active regardless of sigma
# "disabled" means: never active (emergency/maintenance use)

[membrane]
# Global membrane defaults
default_profile = photon
elasticity_check_interval = 30
rupture_policy = fail_closed

# Memory overcommit policy: strict, moderate, permissive
memory_policy = moderate

# OOM behavior: kill_newest, kill_largest, vertex_priority
oom_strategy = vertex_priority

# Vertex priority for OOM (lower = killed first)
# Antimatter vertices are killed before matter vertices
oom_priority_V111 = 100
oom_priority_V101 = 200
oom_priority_V110 = 500
oom_priority_V100 = 700
oom_priority_V001 = 800
oom_priority_V000 = 900
oom_priority_V010 = 1000
# V010 (Neutron/kernel) has highest priority -- never OOM killed

[security]
# Capability enforcement: strict, moderate, permissive
capability_mode = strict

# Seccomp default: restrict, moderate, permissive, disabled
seccomp_default = restrict

# Audit logging
audit_enabled = true
audit_log = /var/waterlight/log/audit.log

# When sigma=1 (antimatter), these can be overridden:
antimatter_capability_mode = moderate
antimatter_seccomp_default = moderate
antimatter_audit_enabled = false

[network]
# Network membrane defaults
default_bridge = wl0
enable_ipv6 = true

# DNS configuration
dns_resolver = 127.0.0.1
dns_search = local

# Network isolation per vertex
V100_net_policy = isolated     # Photon: own network namespace
V101_net_policy = shared       # Antiphoton: shares with photon for observation
V110_net_policy = bridged      # Electron: bridged to host network
V111_net_policy = bridged      # Positron: bridged (needs to reach electron services)

[filesystem]
# Default filesystem type for data volumes
default_fs = btrfs

# Copy-on-write settings (for chirality snapshots)
cow_enabled = true
cow_compression = zstd

# Overlay configuration
overlay_base = /usr/lib/waterlight/rootfs
overlay_work = /var/waterlight/overlay

[boot]
# Boot sequence timing limits (seconds)
hydrogen_timeout = 10
helium_timeout = 5
carbon_timeout = 30
oxygen_timeout = 60
total_timeout = 120

# Emergency shell on boot failure
emergency_shell = true
emergency_shell_timeout = 300
